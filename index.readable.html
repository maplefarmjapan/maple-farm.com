<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Maple Farm</title>
    <style>
        :root {
            /* Light mode colors */
            --bg-primary: #f0f0f0;
            --bg-secondary: white;
            --bg-section: #fff;
            --text-primary: #333;
            --text-secondary: #666;
            --border-color: #ddd;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --nav-bg: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            --nav-hover: rgba(255, 255, 255, 0.1);
            --nav-active: rgba(255, 255, 255, 0.2);
            --carousel-bg: #f8f8f8;
            --calendar-bg: #f5f5f5;
            --button-bg: rgba(0, 0, 0, 0.5);
        }

        [data-theme="dark"] {
            /* Dark mode colors */
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --bg-section: #2d2d2d;
            --text-primary: #e0e0e0;
            --text-secondary: #b0b0b0;
            --border-color: #404040;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --nav-bg: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
            --nav-hover: rgba(255, 255, 255, 0.15);
            --nav-active: rgba(255, 255, 255, 0.25);
            --carousel-bg: #3d3d3d;
            --calendar-bg: #3d3d3d;
            --button-bg: rgba(0, 0, 0, 0.7);
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .iframe-container {
            position: relative;
            width: 100%;
            max-width: 1200px;  /* Limits the maximum width of the iframe */
            padding-bottom: 56.25%; /* 16:9 aspect ratio (height/width ratio = 9/16 = 56.25%) */
            height: 0;
            overflow: hidden;
            z-index: 1;
        }
        .iframe-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        .container {
            max-width: 1200px;
            width: 100%;
            padding: 10px;
            box-sizing: border-box;
            background-color: var(--bg-secondary);
            box-shadow: 0 4px 8px var(--shadow-color);
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }
        nav {
            width: 100%;
            background: var(--nav-bg);
            overflow: visible;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px var(--shadow-color);
            transition: all 0.3s ease;
        }
        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            justify-content: space-around;
        }
        nav ul li {
            display: inline-block;
            width: 100%;
            text-align: center;
            max-width: 250px; /* Ensures menu items are not too wide */
            box-sizing: border-box;
        }
        nav ul li a {
            color: white;
            text-decoration: none;
            padding: 8px 12px;
            display: block;
            text-align: center;
            white-space: nowrap; /* Prevents text from wrapping */
            overflow: hidden; /* Ensures no overflow */
            text-overflow: ellipsis; /* Adds "..." if text is too long */
            transition: all 0.3s ease;
            border-radius: 4px;
            margin: 1px;
            font-weight: 500;
            font-size: 14px;
        }
        nav ul li a:hover {
            background-color: var(--nav-hover);
            transform: translateY(-1px);
            box-shadow: 0 2px 4px var(--shadow-color);
        }
        section {
            padding: 60px 20px;
            margin: 20px 0;
            background-color: var(--bg-section);
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 8px var(--shadow-color);
            transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }
        h1 {
            margin: 0 0 20px;
            text-align: center;
        }
        h2 {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        .back-to-top {
            position: absolute;
            right: 20px;
            top: 20px;
            text-decoration: none;
            font-size: 18px;
            opacity: 0.3;
            color: var(--text-secondary);
            transition: opacity 0.3s ease, transform 0.2s ease;
            cursor: pointer;
            z-index: 10;
        }
        .back-to-top:hover {
            opacity: 0.7;
            transform: scale(1.1);
        }
        @media (max-width: 600px) {
            .back-to-top {
                right: 10px;
                top: 10px;
                font-size: 16px;
            }
        }
        p {
            max-width: 800px;
            margin: 0 auto 20px;
            text-align: center;
            line-height: 1.6;
        }
        p:last-child {
            margin-bottom: 0;
        }
        .grid-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }
        @media (min-width: 768px) {
            .grid-container {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        @media (min-width: 1200px) {
            .grid-container {
                grid-template-columns: repeat(5, 1fr);
            }
        }
        .grid-item {
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            box-shadow: 0 2px 4px var(--shadow-color);
            transition: all 0.3s ease;
        }
        .grid-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px var(--shadow-color);
        }
        .grid-item strong {
            display: block;
            margin-bottom: 8px;
            color: var(--text-primary);
            font-size: 16px;
        }
        .grid-item p {
            margin: 0;
            font-size: 14px;
            line-height: 1.4;
            text-align: left;
            max-width: none;
        }
        .footer {
            margin-top: 40px;
            padding: 20px 0;
            text-align: center;
            font-size: 14px;
            color: var(--text-secondary);
            border-top: 1px solid var(--border-color);
            background-color: var(--bg-primary);
            transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
        }
        .carousel {
            position: relative;
            max-width: 100%;
            overflow: hidden;
            margin: 0 auto;
            width: 100%;
        }
        .carousel-images {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }
        .carousel-images img {
            width: 100%;
            min-width: 100%;
            height: 500px;
            object-fit: contain;
            object-position: center;
            background-color: var(--carousel-bg);
            border-radius: 8px;
            box-shadow: 0 2px 8px var(--shadow-color);
            flex-shrink: 0;
            display: block;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }
        .carousel button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: var(--button-bg);
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .carousel button.prev {
            left: 10px;
        }
        .carousel button.next {
            right: 10px;
        }
        .hamburger {
            display: none;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 10px;
            position: relative;
            margin-right: 10px;
            z-index: 101;
        }
        .hamburger span {
            display: block;
            width: 25px;
            height: 3px;
            margin: 5px 0;
            background-color: white;
            transition: all 0.3s ease;
        }
        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }
        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }
        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }
        .nav-links {
            display: block;
        }
        .dark-mode-toggle {
            background: transparent;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            padding: 6px 10px;
            border-radius: 6px;
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            transition: background-color 0.3s ease, opacity 0.2s ease;
            z-index: 102;
        }
        .dark-mode-toggle:hover {
            background-color: var(--nav-hover);
            opacity: 0.8;
        }
        @media (max-width: 600px) {
            .hamburger {
                display: block;
            }
            .dark-mode-toggle {
                left: 20px;
                right: auto;
                font-size: 16px;
                padding: 4px 8px;
            }
            nav {
                position: relative;
                min-height: 50px;
                display: flex;
                align-items: center;
                justify-content: flex-end;
            }
            .nav-links {
                display: none;
                position: fixed;
                top: 50px;
                left: 0;
                right: 0;
                background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
                z-index: 99;
            }
            .nav-links.active {
                display: block;
            }
            nav ul {
                flex-direction: column; /* Stack menu items vertically */
                align-items: stretch;    /* Full width items */
            }
            nav ul li {
                width: 100%; /* Make sure the menu item takes up full width */
                max-width: none; /* Remove the max-width constraint on small screens */
            }
            nav ul li a {
                padding: 16px 20px;
                border-radius: 0;
                font-size: 16px;
            }
            h1 {
                font-size: 24px;
            }
            p {
                font-size: 16px;
            }
            .iframe-container {
                padding-bottom: 70%; /* Moderate height for mobile */
                height: auto;
            }
            .carousel-images img {
                height: 300px; /* Smaller height for mobile */
            }
        }
    </style>
</head>
<body>
    <div class="container" id="top">
        <h1>Maple Farm</h1>
        <p>Welcome to Maple Farm.</p>
	<p>We hope that you will discover lots of useful information here about Maple Farm and the surrounding area.</p>
        <!-- Navigation Menu -->
        <nav id="mainNav">
            <button class="dark-mode-toggle" id="darkModeToggle" onclick="toggleDarkMode()" title="Toggle dark mode">
                🌙
            </button>
            <button class="hamburger" id="hamburger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-links" id="navLinks">
                <ul>
                    <li><a href="#section1">📸 Photos</a></li>
                    <li><a href="#section2">📍 Location</a></li>
                    <li><a href="#section3">📅 Reservations</a></li>
                    <li><a href="#section4">🍽️ Food & Drink</a></li>
                </ul>
                <ul>
                    <li><a href="#section5">🎯 Attractions</a></li>
                    <li><a href="#section6">ℹ️ Useful Info</a></li>
                    <li><a href="#section7">🚗 Transport</a></li>
                    <li><a href="#section8">⛷️ Ski Resorts</a></li>
                    <li><a href="#section9">🏡 About</a></li>
                </ul>
            </div>
        </nav>

        <!-- Section 1 -->
        <section id="section1">
          <div class="carousel">
            <div class="carousel-images">
	      <img src="images/tatami-suite.jpg" alt="Tatami Suite">
	      <img src="images/winter-fields.jpeg" alt="Winter Fields">
	      <img src="images/microwave-detail.jpg" alt="Microwave Detail">
	      <img src="images/house-angle.jpg" alt="House Angle">
	      <img src="images/front-entrance.jpg" alt="Front Entrance">
	      <img src="images/airplane-sky.jpeg" alt="Airplane Sky">
	      <img src="images/bathroom-controls.jpg" alt="Bathroom Controls">
	      <img src="images/dining-area.webp" alt="Dining Area">
	      <img src="images/vanity-close.jpg" alt="Vanity Close-up">
	      <img src="images/bird-box.webp" alt="Bird Box">
	      <img src="images/snowy-trees.jpeg" alt="Snowy Trees">
	      <img src="images/lone-tree.webp" alt="Lone Tree">
	      <img src="images/summer-exterior.jpg" alt="Summer Exterior">
	      <img src="images/backlit-path.jpeg" alt="Backlit Path">
	      <img src="images/green-tatami.jpg" alt="Green Tatami">
	      <img src="images/mountain-vista.jpeg" alt="Mountain Vista">
	      <img src="images/large-tatami.webp" alt="Large Tatami">
	      <img src="images/winter-vista.jpeg" alt="Winter Vista">
	      <img src="images/hallway-view.jpg" alt="Hallway View">
	      <img src="images/entrance-hall.jpg" alt="Entrance Hall">
	      <img src="images/autumn-trail.jpeg" alt="Autumn Trail">
	      <img src="images/country-road.jpeg" alt="Country Road">
	      <img src="images/washlet-toilet.webp" alt="Washlet Toilet">
	      <img src="images/living-sofa.jpg" alt="Living Room with Sofa">
	      <img src="images/japanese-room.jpg" alt="Japanese Room">
	      <img src="images/utility-sink.jpg" alt="Utility Sink">
	      <img src="images/forest-trail.jpeg" alt="Forest Trail">
	      <img src="images/winter-panorama.jpeg" alt="Winter Panorama">
	      <img src="images/ningle-terrace.jpeg" alt="Ningle Terrace">
	      <img src="images/twin-beds.webp" alt="Twin Beds">
	      <img src="images/kitchen-living.webp" alt="Kitchen Living">
	      <img src="images/bird-feeder.jpg" alt="Bird Feeder">
	      <img src="images/washing-machine.jpg" alt="Washing Machine">
	      <img src="images/bathroom-vanity.webp" alt="Bathroom Vanity">
	      <img src="images/tatami-bedroom.jpg" alt="Tatami Bedroom">
	      <img src="images/living-room.jpg" alt="Living Room">
	      <img src="images/maple-farm-logo.webp" alt="Maple Farm Logo">
	      <img src="images/bath-garden.jpg" alt="Bath with Garden View">
	      <img src="images/spring-mountains.webp" alt="Spring Mountains">
	      <img src="images/blue-pond-winter.jpeg" alt="Blue Pond Winter">
	      <img src="images/built-in-oven.jpg" alt="Built-in Oven">
	      <img src="images/winter-dusk-back-window.jpeg" alt="Winter Dusk Back Window">
	      <img src="images/kitchen-wide.jpg" alt="Kitchen Wide View">
	      <img src="images/toilet-washbasin.webp" alt="Toilet Washbasin">
	      <img src="images/autumn-path.jpeg" alt="Autumn Path">
	      <img src="images/rural-autumn.jpeg" alt="Rural Autumn">
	      <img src="images/induction-cooktop.webp" alt="Induction Cooktop">
	      <img src="images/winter-exterior.jpeg" alt="Winter Exterior">
	      <img src="images/bathtub-view.webp" alt="Bathtub with View">
	      <img src="images/toilet-room.jpg" alt="Toilet Room">
	      <img src="images/kitchen-main.jpg" alt="Main Kitchen">
	      <img src="images/wood-stove.jpg" alt="Wood Stove">
            </div>
            <button class="prev" onclick="prevSlide()">&#10094;</button>
            <button class="next" onclick="nextSlide()">&#10095;</button>
       </section>

        <!-- Section 2 -->
        <section id="section2">
            <a href="#top" class="back-to-top" title="Back to top">⬆️</a>
            <h2>Location and Map</h2>
            <p>Maple Farm is perfectly located just 5 minutes drive from Asahikawa Airport, making it an ideal base for exploring the famous Blue Pond, Patchwork Road, and the beautiful flower fields of Biei.</p>
            <p>The property offers easy access to all major attractions while providing a peaceful countryside setting.</p>
	    <div class="iframe-container">
	      <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2886.7796094681594!2d142.4487049764107!3d43.65275347110216!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x5f0cc3a481c7bcb5%3A0x23ba5a35d4c86629!2sMaple%20Farm!5e0!3m2!1sen!2sjp!4v1729733455200!5m2!1sen!2sjp" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
	      </div>
        </section>

        <!-- Section 3 -->
        <section id="section3">
            <a href="#top" class="back-to-top" title="Back to top">⬆️</a>
            <h2>Reservations</h2>
            <p>Check availability using the calendar below.</p>
            <p>We recommend booking early, especially during peak lavender season (mid-July to mid-August) and winter illumination and ski season (November to April).</p>
	    <div class="iframe-container" id="calendar-container">
              <div class="calendar-placeholder" id="calendar-placeholder">
                <div style="display: flex; align-items: center; justify-content: center; min-height: 450px; background: var(--calendar-bg); border: 1px solid var(--border-color); transition: background-color 0.3s ease, border-color 0.3s ease;">
                  <div style="text-align: center; color: var(--text-secondary);">
                    <div style="font-size: 24px; margin-bottom: 10px;">📅</div>
                    <div>Loading availability calendar...</div>
                  </div>
                </div>
              </div>
	    </div>
        </section>

        <!-- Alternative Booking Section -->
        <section id="section3b">
            <a href="#top" class="back-to-top" title="Back to top">⬆️</a>
            <h2>Direct Booking</h2>
            <p style="text-align: center; margin-bottom: 30px;">Book directly through our reservation system for the best rates and instant confirmation.</p>
            <div style="text-align: center;">
                <a href="https://worldwidebase.airhost.co/en/houses/527325" target="_blank" rel="noopener noreferrer" style="display: inline-block; background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: white; text-decoration: none; padding: 15px 30px; border-radius: 8px; font-size: 18px; font-weight: 600; box-shadow: 0 4px 12px rgba(0,0,0,0.15); transition: all 0.3s ease;">
                    📅 Check Availability & Book Now - Best Rate Guaranteed
                </a>
            </div>
            <p style="font-size: 14px; color: var(--text-secondary); text-align: center; margin-top: 15px;">You'll be redirected to our secure booking platform to complete your reservation.</p>
            
            <!-- Alternative Booking Sites -->
            <div style="margin-top: 40px; padding-top: 30px; border-top: 1px solid var(--border-color);">
                <h3 style="text-align: center; margin-bottom: 20px; font-size: 18px; color: var(--text-secondary);">Also Available On:</h3>
                <div class="grid-container" style="max-width: 800px;">
                    <div class="grid-item" style="text-align: center;">
                        <strong><span style="color: #003580; font-weight: bold;">Booking</span><span style="color: #009fe3;">.com</span></strong>
                        <p style="text-align: center; margin-bottom: 10px;">8.6 rating</p>
                        <a href="https://www.booking.com/hotel/jp/maple-farm.html" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 14px;">View listing →</a>
                    </div>
                    <div class="grid-item" style="text-align: center;">
                        <strong style="color: #5d53d0;">agoda</strong>
                        <p style="text-align: center; margin-bottom: 10px;">Popular choice</p>
                        <a href="https://www.agoda.com/maple-farm/hotel/asahikawa-jp.html" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 14px;">View listing →</a>
                    </div>
                    <div class="grid-item" style="text-align: center;">
                        <strong><span style="color: #287dfa;">Trip</span><span style="color: #333;">.com</span></strong>
                        <p style="text-align: center; margin-bottom: 10px;">Latest deals</p>
                        <a href="https://www.trip.com/hotels/asahikawa-hotel-detail-89012514/maple-farm/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 14px;">View listing →</a>
                    </div>
                    <div class="grid-item" style="text-align: center;">
                        <strong><span style="color: #d32323;">Hotels</span><span style="color: #333;">.com</span></strong>
                        <p style="text-align: center; margin-bottom: 10px;">Member prices</p>
                        <a href="https://in.hotels.com/ho2425491424/maple-farm-asahikawa-japan/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 14px;">View listing →</a>
                    </div>
                    <div class="grid-item" style="text-align: center;">
                        <strong style="color: #ff5a5f;">airbnb</strong>
                        <p style="text-align: center; margin-bottom: 10px;">Vacation rental</p>
                        <a href="https://www.airbnb.com/l/GdMSJ1db" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 14px;">View listing →</a>
                    </div>
                    <div class="grid-item" style="text-align: center;">
                        <strong style="color: #ff5722;">Klook</strong>
                        <p style="text-align: center; margin-bottom: 10px;">Travel deals</p>
                        <a href="https://www.klook.com/en-SG/hotels/detail/870458-maple-farm/" target="_blank" style="color: #0066cc; text-decoration: none; font-size: 14px;">View listing →</a>
                    </div>
                </div>
                <p style="text-align: center; margin-top: 20px; font-size: 13px; color: var(--text-secondary); font-style: italic;">
                    Note: Prices may vary between platforms. We recommend booking directly for the best rates and support.
                </p>
            </div>
        </section>

        <!-- Section 4 -->
        <section id="section4">
            <a href="#top" class="back-to-top" title="Back to top">⬆️</a>
            <h2>Food & Drink</h2>
            <div class="grid-container">
                <div class="grid-item">
                    <strong>Asahikawa Food Court</strong>
                    <p>Open 9am to 8pm every day. Various dining options under one roof.</p>
                </div>
                <div class="grid-item">
                    <strong>7-Eleven</strong>
                    <p>Convenience store located in the airport for quick snacks and essentials.</p>
                </div>
                <div class="grid-item">
                    <strong>Seicomart</strong>
                    <p>Convenience store next to Chiyugaoka Station, only 5 minutes drive away.</p>
                </div>
                <div class="grid-item">
                    <strong>Fried Chicken Stall</strong>
                    <p>Located next to Chiyugaoka Station for fresh, hot fried chicken.</p>
                </div>
                <div class="grid-item">
                    <strong>Asahikawa Ramen</strong>
                    <p>Try the famous shoyu-based ramen with its signature thin layer of oil. Visit Asahikawa Ramen Village with 8 renowned shops including Aoba, Tenkin, and Santoka.</p>
                </div>
                <div class="grid-item">
                    <strong>Local Specialties</strong>
                    <p>Experience Jingisukan (grilled lamb on convex metal grills), Hokkaido soup curry, and fresh local seafood and vegetables. The region is renowned for its high-quality agricultural products.</p>
                </div>
            </div>
        </section>

        <!-- Section5  -->
        <section id="section5">
            <a href="#top" class="back-to-top" title="Back to top">⬆️</a>
            <h2>Attractions</h2>
            <div class="grid-container">
                <div class="grid-item">
                    <strong>Blue Pond</strong>
                    <p>The world-famous cobalt-blue pond is just 15 minutes drive away. Features winter illuminations from December to February.</p>
                </div>
                <div class="grid-item">
                    <strong>Patchwork Road</strong>
                    <p>Scenic route featuring the iconic Ken & Mary Tree, Seven Stars Tree, and colorful agricultural fields creating a beautiful patchwork landscape.</p>
                </div>
                <div class="grid-item">
                    <strong>Asahiyama Zoo</strong>
                    <p>Famous for daily penguin walks during the Winter, interactive seal tanks, and up-close animal encounters, the zoo is only 20 minutes drive away.</p>
                </div>
                <div class="grid-item">
                    <strong>Flower Fields</strong>
                    <p>Peak lavender season is from mid-July to mid-August. Shikisai Hill is only 20 minutes drive and has walking trails and tractor-pulled wagon rides.</p>
                </div>
            </div>
        </section>
	
	<!-- Section 6 -->
        <section id="section6">
            <a href="#top" class="back-to-top" title="Back to top">⬆️</a>
            <h2>Useful Info</h2>
            <p><strong>Best Seasons:</strong><br>
            Summer (July-August) for flower fields and mild weather. Winter (December-February) for skiiing, the Blue Pond illuminations and Asahikawa Winter Festival.</p>
            
            <p><strong>Cultural Sites:</strong><br>
            Asahikawa City Museum showcasing Ainu culture, Otokoyama Sake Brewery for tastings, and traditional Hokkaido handicraft shops.</p>
            
            <p><strong>Weather:</strong><br>
            Summer temperatures 15-35°C (59-95°F). Winter temperatures -15-10°C (5-50°F) with many days of powder snow and blue skies.</p>
        </section>

        <!-- Section 7 -->
        <section id="section7">
            <a href="#top" class="back-to-top" title="Back to top">⬆️</a>
            <h2>Transport</h2>
            <p><strong>From Asahikawa Airport:</strong><br>
            Taxi (5 minutes; &lt;&yen;1,500) or rental cars available at the airport.</p>
            
            <p><strong>Getting Around:</strong><br>
            Car rental recommended for maximum flexibility accessing remote attractions. Bicycle rentals available: 200 yen/hour regular, 600 yen/hour electric bikes.</p>
            
            <p><strong>Key Distances By Car:</strong><br>
            Blue Pond (15 min), Asahiyama Zoo (20 min), Furano (1h), Shikisai Hill (20 min).</p>
        </section>

        <!-- Section 8 -->
        <section id="section8">
            <a href="#top" class="back-to-top" title="Back to top">⬆️</a>
            <h2>Ski Resorts</h2>
            <div class="grid-container">
                <div class="grid-item">
                    <strong>Kamui Ski Links (40 minutes)</strong>
                    <p>The closest ski resort to Maple Farm, featuring 25 courses across beginner to advanced levels. Known for excellent powder snow and night skiing until 9pm. Lift tickets: 4,500 yen/day adults.</p>
                </div>
                <div class="grid-item">
                    <strong>Asahidake (45 minutes)</strong>
                    <p>Japan's longest ski season (November to May) on Hokkaido's highest peak. Famous for deep powder, backcountry skiing, and stunning mountain views. Advanced terrain recommended for experienced skiers.</p>
                </div>
                <div class="grid-item">
                    <strong>Kurodake (1 hour)</strong>
                    <p>Part of Daisetsuzan National Park with spectacular alpine scenery. Offers both groomed runs and off-piste opportunities. Connected to Asahidake via ropeway system for mountain exploration.</p>
                </div>
                <div class="grid-item">
                    <strong>Canmore Ski Village (20 minutes)</strong>
                    <p>A smaller, family-friendly ski area perfect for beginners and intermediate skiers. Affordable lift tickets and relaxed atmosphere. Great for families with children learning to ski.</p>
                </div>
                <div class="grid-item">
                    <strong>Furano Ski Resort (1h 15min)</strong>
                    <p>Famous resort that hosted FIS World Cup races. Two ski areas (Kitanomine and Furano zones) with varied terrain. Known for excellent snow quality and beautiful views of the Tokachi mountain range.</p>
                </div>
            </div>
        </section>

        <!-- Section 9 -->
        <section id="section9">
            <a href="#top" class="back-to-top" title="Back to top">⬆️</a>
            <h2>About Maple Farm</h2>
            <p>Maple Farm offers comfortable accommodation in the heart of Hokkaido's most scenic region. Located just minutes from Asahikawa Airport and Biei's famous attractions, our property provides the perfect blend of convenience and tranquility.</p>
            
            <p>Whether you're here for the summer flower fields, winter illuminations, or year-round cultural experiences, Maple Farm serves as your ideal base for exploring all that this beautiful region has to offer.</p>
        </section>
	
        <footer class="footer">
            <p>&copy; 2020-2025 Maple Farm. All rights reserved.</p>
        </footer>
	
	</div>
    </div>

    <script>
        let currentSlide = 0;
        const slides = document.querySelectorAll('.carousel-images img');

        function showSlide(index) {
            if (index >= slides.length) currentSlide = 0;
            if (index < 0) currentSlide = slides.length - 1;
            const offset = -currentSlide * 100;
            document.querySelector('.carousel-images').style.transform = `translateX(${offset}%)`;
        }

        function nextSlide() {
            currentSlide++;
            showSlide(currentSlide);
        }

        function prevSlide() {
            currentSlide--;
            showSlide(currentSlide);
        }

        // Lazy load calendar
        function loadCalendar() {
            const placeholder = document.getElementById('calendar-placeholder');
            const iframe = document.createElement('iframe');
            const isMobile = window.innerWidth <= 600;
            const height = isMobile ? 240 : 600;
            const timestamp = Date.now();
            iframe.src = `https://calendar.google.com/calendar/embed?height=${height}&wkst=2&ctz=Asia%2FTokyo&showPrint=0&showCalendars=0&mode=MONTH&showTabs=0&showNav=1&showDate=1&showTitle=1&title=Maple%20Farm%20Availability&src=ZW4uamFwYW5lc2UjaG9saWRheUBncm91cC52LmNhbGVuZGFyLmdvb2dsZS5jb20&src=bmZocjRmMGdicThpZmxqMHNpZnRtbWQyYjBoNnJvczlAaW1wb3J0LmNhbGVuZGFyLmdvb2dsZS5jb20&color=%230B8043&color=%23795548&_=${timestamp}`;
            iframe.style.cssText = `border:solid 1px #777; width:100%; height:${height}px;`;
            iframe.frameBorder = '0';
            iframe.scrolling = 'yes';
            placeholder.parentNode.replaceChild(iframe, placeholder);
            console.log('Calendar loaded with height:', height, 'Mobile:', isMobile);
        }

        // Background loading with idle callback
        let calendarLoaded = false;
        let mapLoaded = false;
        
        function loadMapInBackground() {
            if (mapLoaded) return;
            // Map is already embedded in HTML, just mark as loaded
            mapLoaded = true;
            console.log('Map marked as loaded');
        }
        
        function loadCalendarInBackground() {
            if (calendarLoaded) return;
            loadCalendar();
            calendarLoaded = true;
            console.log('Calendar loaded in background');
        }
        
        function scheduleBackgroundLoading() {
            // Use requestIdleCallback for low priority loading, fallback to setTimeout
            const scheduleIdle = window.requestIdleCallback || ((cb) => setTimeout(cb, 1));
            
            // Load map first (lighter weight - already in HTML)
            scheduleIdle(() => {
                loadMapInBackground();
            });
            
            // Load calendar after a delay (heavier weight)
            scheduleIdle(() => {
                setTimeout(() => {
                    loadCalendarInBackground();
                }, 2000); // Wait 2 seconds after idle
            });
        }
        
        // Intersection Observer for immediate loading when viewed (fallback)
        const calendarObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !calendarLoaded) {
                    loadCalendar();
                    calendarLoaded = true;
                    calendarObserver.unobserve(entry.target);
                }
            });
        }, { rootMargin: '100px' });

        // Dark mode toggle functionality
        function toggleDarkMode() {
            const html = document.documentElement;
            const toggleButton = document.getElementById('darkModeToggle');
            
            if (html.getAttribute('data-theme') === 'dark') {
                html.removeAttribute('data-theme');
                toggleButton.textContent = '🌙';
                localStorage.setItem('theme', 'light');
            } else {
                html.setAttribute('data-theme', 'dark');
                toggleButton.textContent = '☀️';
                localStorage.setItem('theme', 'dark');
            }
        }

        // Initialize dark mode from localStorage
        function initDarkMode() {
            const savedTheme = localStorage.getItem('theme');
            const toggleButton = document.getElementById('darkModeToggle');
            const html = document.documentElement;
            
            if (savedTheme === 'dark') {
                html.setAttribute('data-theme', 'dark');
                toggleButton.textContent = '☀️';
            } else {
                html.removeAttribute('data-theme');
                toggleButton.textContent = '🌙';
            }
        }

        // Hamburger menu toggle
        function toggleMenu() {
            const hamburger = document.getElementById('hamburger');
            const navLinks = document.getElementById('navLinks');
            hamburger.classList.toggle('active');
            navLinks.classList.toggle('active');
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                    // Close mobile menu after clicking
                    if (window.innerWidth <= 600) {
                        document.getElementById('hamburger').classList.remove('active');
                        document.getElementById('navLinks').classList.remove('active');
                    }
                }
            });
        });

        // Active section highlighting
        function updateActiveNav() {
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('nav a');
            
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (window.pageYOffset >= (sectionTop - 200)) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.style.backgroundColor = '';
                if (link.getAttribute('href').slice(1) === current) {
                    link.style.backgroundColor = 'var(--nav-active)';
                }
            });
        }

        window.addEventListener('scroll', updateActiveNav);

        // Keyboard navigation for carousel
        document.addEventListener('keydown', (e) => {
            // Only work if carousel is visible on screen
            const carousel = document.querySelector('.carousel');
            if (carousel) {
                const rect = carousel.getBoundingClientRect();
                const isVisible = rect.top < window.innerHeight && rect.bottom > 0;
                
                if (isVisible) {
                    if (e.key === 'ArrowLeft') {
                        prevSlide();
                    } else if (e.key === 'ArrowRight') {
                        nextSlide();
                    }
                }
            }
        });

        // Touch/swipe navigation for carousel
        let touchStartX = 0;
        let touchEndX = 0;
        
        function handleTouchStart(e) {
            touchStartX = e.changedTouches[0].screenX;
        }
        
        function handleTouchEnd(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        }
        
        function handleSwipe() {
            const swipeThreshold = 50; // Minimum distance for swipe
            const swipeDistance = touchEndX - touchStartX;
            
            if (Math.abs(swipeDistance) > swipeThreshold) {
                if (swipeDistance > 0) {
                    // Swipe right - go to previous image
                    prevSlide();
                } else {
                    // Swipe left - go to next image
                    nextSlide();
                }
            }
        }

        // Trackpad/mouse wheel navigation for carousel with inertia control
        let wheelAccumulator = 0;
        let wheelTimeout = null;
        let isWheelCooldown = false;
        const wheelThreshold = 300; // Much higher threshold - need significant scroll to trigger
        
        function handleWheel(e) {
            // Only work if carousel is visible on screen
            const carousel = document.querySelector('.carousel');
            if (carousel) {
                const rect = carousel.getBoundingClientRect();
                const isVisible = rect.top < window.innerHeight && rect.bottom > 0;
                
                if (isVisible) {
                    // Only handle horizontal scrolling (deltaX), ignore vertical (deltaY)
                    if (Math.abs(e.deltaX) > Math.abs(e.deltaY)) {
                        e.preventDefault(); // Only prevent page scroll for horizontal movements
                        
                        // Skip if we're in cooldown period
                        if (isWheelCooldown) {
                            return;
                        }
                        
                        // Only use horizontal delta for carousel navigation
                        const delta = e.deltaX * 0.5; // Reduce sensitivity by half
                        wheelAccumulator += delta;
                        
                        // Clear existing timeout
                        if (wheelTimeout) {
                            clearTimeout(wheelTimeout);
                        }
                        
                        // Check if we've accumulated enough scroll to trigger a slide
                        if (Math.abs(wheelAccumulator) >= wheelThreshold) {
                            if (wheelAccumulator > 0) {
                                // Scroll right - next image
                                nextSlide();
                            } else {
                                // Scroll left - previous image
                                prevSlide();
                            }
                            
                            // Reset everything and enter cooldown
                            wheelAccumulator = 0;
                            isWheelCooldown = true;
                            
                            // Long cooldown period to prevent multiple slides
                            setTimeout(() => {
                                isWheelCooldown = false;
                            }, 800);
                            
                        } else {
                            // Reset accumulator if no scroll for 300ms (longer timeout)
                            wheelTimeout = setTimeout(() => {
                                wheelAccumulator = 0;
                            }, 300);
                        }
                    }
                }
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initDarkMode(); // Initialize dark mode first
            showSlide(currentSlide);
            
            // Set up intersection observer as fallback
            const calendarContainer = document.getElementById('calendar-container');
            if (calendarContainer) {
                calendarObserver.observe(calendarContainer);
            }
            
            updateActiveNav();
            
            // Add touch and wheel listeners to carousel
            const carousel = document.querySelector('.carousel');
            if (carousel) {
                carousel.addEventListener('touchstart', handleTouchStart, { passive: true });
                carousel.addEventListener('touchend', handleTouchEnd, { passive: true });
                carousel.addEventListener('wheel', handleWheel, { passive: false });
            }
            
            // Schedule background loading after initial page load
            scheduleBackgroundLoading();
        });
    </script>
</body>
</html>
